<!doctype html>
<html lang="fr">

  <head>
    <meta charset="utf-8">

    <title>Silex, retour sur un an d'expérience</title>

    <meta name="description" content="Présentation donnée au Symfony Live Paris 2013">
    <meta name="author" content="Mikael Randy">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/night.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">
      <div class="slides">
        
        <section>
          <img src="img/logo_silex.png">
          <h1>Silex, retour sur un an d'utilisation</h1>
          <h3>Symfony Live Paris 2013</h3>
          <p>Le 5 avril 2013</p>
        </section>

        <section>
          <h2>La loi des 2 pieds</h2>

          <img src="img/loi_2pieds.png" />

          <aside class="notes">
            * Si vous n'êtes en train d'apprendre ou de contribuer, passez à autre chose
            * Ne vous sentez pas obligé de rester ici
          </aside>
        </section>

        <section>
          <section>
            <h2>Me, my and myself</h2>

            <img src="img/photo_conference.png" />
            
            <p>Mikael Randy</p>
            <p>@mikaelrandy</p>

            <aside class="notes">
              * Qui je suis
              * Développeur PHP depuis 8 ans
            </aside>
          </section>

          <section>
            <img src="img/logo_silex.png" />
            <img src="img/logo_tea.png" />
            <img src="img/logo_ruby.png" />
            <img src="img/logo_symfony2.png" />

            <aside class="notes">
              * The ebook alternative<br />
                * Startup dans le monde du livre numérique<br />
                * Plateforme compléte de diffusion et de lecture de livres numériques<br />
              * Silex<br />
                * Pour voir si vous avez suivi ;)<br />
                * Nous allons y revenir ...<br />
              * Ruby<br />
                * J'ai vu d'autres choses, d'autres approches, car je pense "le bon outil pour le bon besoin"<br />
              * Symfony<br />
                * Découverte en 2007 (Symfony 1.0 !)<br />
                * Application en SSII (responsable technique)<br />
                * Migration progressive jusque Symfony2.0<br />
            </aside>
          </section>

          <section>
            <img src="img/AFUP_LYON_LOGO.png" />

            <aside class="notes">
              * Membre actif de l'AFUP
              * Coordinateur de l'antenne lyonnaise
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h2>Le contexte</h2>
          </section>

          <section>
            <h3>L'entreprise</h3>
            <ul>
              <li>Startup</li>
              <li>Tout à construire</li>
            </ul>

            <aside class="notes">
              * Startup
                * Nouvelle société
                * Nouvelle branche (livre numérique)
              * Tout à construire, tout à faire, sur une équipe réduite
            </aside>
          </section>

          <section>
            <h3>Projets</h3>

            <p>Pas d'existant</p>

            <aside class="notes">
              * Projet de 0
              * Liberté totale sur tout les choix
              * Seules contraintes : il va falloir le maintenir
            </aside>
          </section>

          <section>
            <h3>L'équipe</h3>

            <ul>
              <li>Experts</li>
              <li>Sentiment d'être contraint par le framework</li>
            </ul>

            <aside class="notes">
              * Equipe d'experts
                * 2 séniors, 1 débutante avec de grands idéaux
                * Expérience significative en Symfony 1/2
              * Le sentiment d'être plus souvent contraint qu'aidé par le framework
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h2>Les projets</h2>

            <aside class="notes">
              * Sur les projets de la société (PHP, Symfony, Silex, Ruby bulk, Rails), 2 retenus
              * Projets typiques pour appuyer mon propos
            </aside>
          </section>

          <section>
            <h3>Warehouse</h3>
            <ul>
              <li>Entrepôt de livres numériques</li>
              <li>Beaucoup de traitements métiers</li>
              <li>Uniquement des API</li>
            </ul>

            <aside class="notes">
              * Un projet qui sort des sentiers battus
              * Beaucoup de traitements métiers
                * Stockage de fichier, watermarking, protection DRM, ...
                * On utilise pas trop les fonctionnalités du Framework
              * Uniquement des APIs
                * Part minime du fonctionnement général
            </aside>
          </section>

          <section>
            <h3>Backend</h3>

            <ul>
              <li>Ecrans d'administration</li>
              <li>Ecran de reporting de données</li>
              <li>Connexion/profils utilisateurs</li>
            </ul>
          </section>

          <aside class="notes">
            * Un projet "classique"
              * Des écrans qui servent d'interfaces pour création/modification de données
              * Un peu de calcul, mais sans plus
            * Profils utilisateurs
              * Ecrans à contenu adaptables
          </aside>
        </section>

        <section>
          <section>
            <h2>Les débuts, l'euphorie</h2>

            <ul>
              <li>Feuille blanche</li>
              <li>
                Récupération
                <ul>
                  <li>Arborescence</li>
                  <li>ORM</li>
                  <li>Twig</li>
                </ul>
              </li>
              <li>
                Adaptation
                <ul>
                  <li>Controlleurs partagés</li>
                </ul>
              </li>
            </ul>

            <aside class="notes">
              * Feuille blanche
                * Grisé par le "tout à faire"
                * Euphorie du début
              * On récupère les bonnées idées
                * Arborescence 
                  * Découpage propre
                * ORM
                  * Doctrine
                  * On garde toute la couche
                * Twig
                  * C'est tellement pratique de l'utiliser
              * On adapte celles qui nous gènes
                * Controlleurs partagés
                  * On construit des controlleurs qui sont réutilisables, et utilisés par plusieurs routes
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h2>La maintenance, la désillusion</h2>

            <aside class="notes">
              * Puis, un jour, il faut maintenir le projet
              * Le backend évolue
                * il faut rajouter des écrans
                * Modifier les traitement métiers
            </aside>
          </section>

          <section>
            <h3>ORM</h3>

            <blockquote>Mais pourquoi on a gardé ça ?</blockquote>

            <p>Tout ce qu'on voulait éviter, les contraintes sans la souplesse</p>

            <aside class="notes">
              * Système rigide
              * Perte de performances pour apporter de la facilité initiale
            </aside>
          </section>

          <section>
            <h3>Sécurisation</h3>

            <ul>
              <li>Chaque controlleur fait sa propre vérification</li>
              <li>Duplication de code, difficulté de maintenance, d'évolution</li>
            </ul>

          </section>

          <section>
            <h3>Tasks</h3>

            <blockquote>Mais pourquoi on a pas utilisé le composant Console ?</blockquote>

            <p>On a réinventé la roue</p>
            <p class="fragment">Et en plus, elle est carrée :/</p>

            <aside class="notes">
              * Emporté par l'élan, on a fait une monumentale erreur
              * Ecriture de notre propre librairie de commandes CLI, mais fonctionnellement loin du composant Symfony
            </aside>
          </section>

          <section>
            <h3>Configuration</h3>

            <ul>
              <li>Gestion et accès</li>
              <li>Valeurs par défaut</li>
              <li>Gestion multi-environnements</li>
            </ul>

            <aside class="notes">
              * Gestion et accès facile
                * Pimple est cool ...
                * ... mais il faut l'alimenter :/
              * Valeurs par défaut
                * Comment éviter 10mn de configuration à chaque MEP
              * Gestion multi-environnement
                * ça semble simple, hein ;)
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h2>Entamons un refactoring</h2>
            
            <aside class="notes">
              * Bon, on prend un peu de temps et on reprend un peu ça
            </aside>
          </section>

          <section>
            <h3>ORM--, DBAL++</h3>

            <ul>
              <li>Retrait de l'ORM
              <li>Conservation la couche DBAL</li>
            </ul>

            <aside class="notes">
              * Retrait ORM
                * Tout ce qui est Entity, Repository, bref, le code auto-généré
                * On ne passera plus par du code pour accéder à la base de données
              * Conservation de la couche DBAL
                * Facilité d'accès à la connexion
                * Gestion des erreurs
                * Protection des requêtes
                * Encapsulation "simple"
            </aside>
          </section>

          <section>
            <h3>Sécurisation</h3>

            <blockquote>Comment faire sans Symfony ?</blockquote>

            <ul>
              <li>Middleware Silex</li>
            </p>

            <aside class="notes">
              * C'est pas super, mais c'est un quickwin
            </aside>
          </section>

          <section>
            <h3>Difficulité de migration</h3>

            <ul>
              <li>Pas de refactoring "tremblement de terre"</li>
              <li>Cohabitation ancien et nouveau code</li>
              <li>Difficulté de maintenir les versions en parallèle</li>
            </ul>

            <aside class="notes">
              * Refactoring "tremblement de terre"
                * On ne peux pas investir X jours sans produire de la valeur
                * On fait la base, le nécessaire, puis ça sera du continue
              * Cohabitation
                * On est plus devant une feuille vierge
                * On "paye la note"
              * Maintenance
                * Une petite modif ? Ah bah non, c'est dans un code à migrer
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h2>Dans le dur</h2>

            <aside class="notes">
              * Vous devez vous dire qu'on est enfin sur de bons rails ?
                * EH BAH NON !
            </aside>
          </section>

          <section>
            <h3>Tiens, une nouvelle idée</h3>

            <ul>
              <li>Découpage en modèle/service/controlleur</li>
              <li>Tiens, une 3eme organisation !</li>
            </ul>
            <br /><br />
            <p class="fragment" style="font-size: 120%; color: red;">ALERTE ROUGE !</p>

            <aside class="notes">
              * A force de se renseigner, on trouve de nouvelles idées
                * Le découpage est plus proche de notre approche par profil
                * ça colle, on y va
              * Nouvelle organisation
                * Alors que le refactoring précédent n'est pas terminé, on s'apprète à introduire une 3ème approche
              * Alerte
                * On va trop vite, on se laisse trop porter par le vent
            </aside>
          </section>
        </section>

        <section>
          <h2>Le projet vis, la réconciliation</h2>

          <ul>
            <li>
              Une fois ces erreurs apprises, le projet reprend vie
              <ul>
                <li>On fait un bon point sur ce qu'on fait, comment on le fait</li>
                <li>On réinvesti un peu de temps pour lancer cette harmonisation</li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h2>Conclusion</h2>

          <ul>
            <li>
              Au début, j'ai présenté 2 projets, mais par la suite, je ne parle plus que d'un seul
              <ul>
                <li>Le warehouse est loin d'un projet web "standard", il n'utilise pas les outils habituels</li>
                <li>Le backend est un projet plus standard : vue, gestion des utilisateurs, ...</li>
              </ul>
            </li>
            <li>
              Après un an, si j'avais à refaire le choix de l'outil a utiliser
              <ul>
                <li>Pour le backend, je ne reprendrais pas Silex, mais Symfony, car je n'ai fait que réinventer la roue</li>
                <li>Pour le warehouse, je reprendrais Silex. J'aurais perdu trop de temps à détourner Symfony de son but originel</li>
              </ul>
            </li>
            <li>
              Quitte à enfoncer des portes ouvertes
              <ul>
                <li>A partir du moment où on passe du temps à réinstaller les composants de Sf2, il faut se poser la question du choix de Silex</li>
                <li>Se poser la question au moment du démarrage du projet des composants qu'il va falloir embarquer</li>
                <li>Est-ce un projet "standard" ? Si oui => Symfony2</li>
              </ul>
            </li>
            <li>
              Pourquoi réinventer la roue
              <ul>
                <li>Trouver des exemples de Provider qui ne font que réinventer Symfony2</li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <section>
            <p>Reveal.js</p>
            <p>@mikaelrandy</p>
          </section>

          <section>
            <h2>Questions ?</h2>
            <p>Adresse de la présentation partagée</p>
          </section>
        </section>
      </div>
    </div>

  </body>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.min.js"></script>

  <script>

    Reveal.initialize({
      width: 1024,
      height: 968,

      controls: true,
      progress: true,
      history: true,
      center: true,

      theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
      transition: Reveal.getQueryHash().transition || 'concave', // default/cube/page/concave/zoom/linear/fade/none

      // Optional libraries used to extend on reveal.js
      dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
    });

  </script>
</html>
